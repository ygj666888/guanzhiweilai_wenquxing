<template>
	<view class="more-container">
		<!-- é¡¶éƒ¨æ ‡é¢˜ -->
		<view class="header">
			<text class="page-title">{{groupTitle}}</text>
		</view>

		<!-- ä¸»è¦å†…å®¹ -->
		<scroll-view class="main-content" scroll-y="true">
			<!-- å·¥å…·åˆ—è¡¨ -->
			<view class="tools-section">
				<view class="tools-grid">
					<view 
						class="tool-item" 
						v-for="(tool, index) in toolsList" 
						:key="index"
						@click="selectTool(tool)"
					>
						<view class="tool-icon">
							<image v-if="tool.icon" :src="tool.icon" class="icon-img" mode="aspectFit" />
							<text v-else class="icon-text">{{tool.name.charAt(0)}}</text>
						</view>
						<text class="tool-name">{{tool.name}}</text>
						<text class="tool-desc">{{tool.desc}}</text>
						<view class="tool-tag">{{tool.tag}}</view>
					</view>
				</view>
			</view>

			<!-- ä¸Šä¼ åŒºåŸŸ -->
			<view class="upload-section">
				<text class="section-title">ä¸Šä¼ æ–‡æ¡£</text>
				<text class="section-desc">ä¸Šä¼ æ‚¨çš„æ–‡æ¡£ï¼ŒAIå°†ä¸ºæ‚¨æä¾›æ›´ç²¾å‡†çš„åˆ›ä½œå»ºè®®</text>
				
				<view class="upload-area" @click="chooseFile">
					<view class="upload-icon">ğŸ“„</view>
					<text class="upload-text">ç‚¹å‡»ä¸Šä¼ æ–‡æ¡£</text>
					<text class="upload-tip">æ”¯æŒ Wordã€PDFã€TXT æ ¼å¼</text>
				</view>

				<!-- å·²ä¸Šä¼ æ–‡ä»¶åˆ—è¡¨ -->
				<view class="file-list" v-if="uploadedFiles.length > 0">
					<view class="file-item" v-for="(file, index) in uploadedFiles" :key="index">
						<view class="file-info">
							<text class="file-name">{{file.name}}</text>
							<text class="file-size">{{file.size}}</text>
						</view>
						<view class="file-actions">
							<text class="action-btn" @click="previewFile(file)">é¢„è§ˆ</text>
							<text class="action-btn delete" @click="deleteFile(index)">åˆ é™¤</text>
						</view>
					</view>
				</view>
			</view>

			<!-- å¿«é€Ÿæ“ä½œ -->
			<view class="quick-actions">
				<text class="section-title">å¿«é€Ÿæ“ä½œ</text>
				<view class="action-buttons">
					<button class="action-btn" @click="startCreation">å¼€å§‹åˆ›ä½œ</button>
					<button class="action-btn secondary" @click="saveTemplate">ä¿å­˜æ¨¡æ¿</button>
					<button class="action-btn secondary" @click="shareTools">åˆ†äº«å·¥å…·</button>
				</view>
			</view>
		</scroll-view>
	</view>
</template>

<script>
export default {
	data() {
		return {
			groupKey: '',
			groupTitle: '',
			uploadedFiles: [],
			toolsList: []
		}
	},
	onLoad(options) {
		if (options.group) {
			this.groupKey = options.group
			this.loadGroupData()
		}
	},
	methods: {
		loadGroupData() {
			// æ ¹æ®åˆ†ç»„keyåŠ è½½å¯¹åº”çš„å·¥å…·åˆ—è¡¨
			const groupData = {
				'hot': {
					title: 'çƒ­é—¨åˆ›ä½œ',
					tools: [
						{ icon: '/static/word.png', tag: 'é•¿æ–‡', name: 'è®ºæ–‡åŠ©æ‰‹', desc: 'åŸºäºä¸“ä¸šçŸ¥è¯†åº“çš„AIè®ºæ–‡ä¸“å®¶' },
						{ icon: '/static/word.png', tag: 'é•¿æ–‡', name: 'è®ºæ–‡é€‰é¢˜', desc: 'æ™ºèƒ½æ¨èè®ºæ–‡é€‰é¢˜ï¼ŒåŠ©ä½ å¿«é€Ÿç¡®å®šç ”ç©¶æ–¹å‘' },
						{ icon: '/static/ppt.png', tag: 'é•¿æ–‡', name: 'PPT', desc: 'ä¸€é”®å¿«é€Ÿç”Ÿæˆï¼Œè½»æ¾æå®šPPT' },
						{ icon: '/static/word.png', tag: 'é•¿æ–‡', name: 'è®ºæ–‡ç­”è¾©', desc: 'è®ºæ–‡ç­”è¾©ï¼Œæˆ‘æ¥å¸®ä½ ç²¾å¿ƒå‡†å¤‡' }
					]
				},
				'edu': {
					title: 'å­¦æœ¯æ•™è‚²',
					tools: [
						{ icon: '/static/word.png', tag: 'é•¿æ–‡', name: 'å¼€é¢˜æŠ¥å‘Š', desc: 'ä¸‡äº‹å¼€å¤´éš¾ï¼Œå¼€é¢˜æŠ¥å‘Šç‰¹åˆ«éš¾~æ¥ï¼Œç‚¹æˆ‘ï¼' },
						{ icon: '/static/word.png', tag: 'é•¿æ–‡', name: 'æ–‡çŒ®ç»¼è¿°', desc: 'æ–‡çŒ®æ€»ç»“è¯„ä»·ï¼Œè§‚ç‚¹æ·±å…¥å‰–æ' },
						{ icon: '/static/word.png', tag: 'é•¿æ–‡', name: 'æ–‡æ¡£ç¿»è¯‘', desc: 'åšæœ€ä¸“ä¸šçš„æ–‡æ¡£ç¿»è¯‘åŠ©æ‰‹~' },
						{ icon: '/static/word.png', tag: 'é•¿æ–‡', name: 'è®ºæ–‡åŠ©æ‰‹', desc: 'åŸºäºä¸“ä¸šçŸ¥è¯†åº“çš„AIè®ºæ–‡ä¸“å®¶' },
						{ icon: '/static/word.png', tag: 'é•¿æ–‡', name: 'æ–‡æ¡£æ”¹å†™é™é‡', desc: 'æ–‡æ¡£å…¨æ–‡ä¸€é”®æ”¹å†™ï¼Œé™é‡ç¥å™¨' },
						{ icon: '/static/word.png', tag: 'é•¿æ–‡', name: 'ç­”è¾©ç¨¿', desc: 'è®ºæ–‡ç­”è¾©ï¼Œæˆ‘æ¥å¸®ä½ ç²¾å¿ƒå‡†å¤‡' },
						{ icon: '/static/word.png', tag: 'é•¿æ–‡', name: 'å»AIç—•è¿¹', desc: 'æ–‡ç« é™é‡+å»"AI"å‘³' }
					]
				},
				'student': {
					title: 'å­¦ç”Ÿå¸¸ç”¨',
					tools: [
						{ icon: '/static/report.png', tag: 'é•¿æ–‡', name: 'å®ä¹ æ€»ç»“æŠ¥å‘Š', desc: 'å…¨é¢ä¸“ä¸šæ·±å…¥çš„å®ä¹ æ€»ç»“/å®ä¹ æŠ¥å‘Š' },
						{ icon: '/static/note.png', tag: 'é•¿æ–‡', name: 'å¿ƒå¾—ä½“ä¼š', desc: 'ä»»ä½•å¿ƒå¾—ä½“ä¼šï¼Œéƒ½èƒ½ä¸Šä»·å€¼ï¼' },
						{ icon: '/static/report.png', tag: 'é•¿æ–‡', name: 'èŒä¸šè§„åˆ’ä¹¦', desc: 'æ¸…æ™°çš„èŒä¸šè§„åˆ’ï¼Œæ˜¯äº‹ä¸šæˆåŠŸçš„å‰æ' },
						{ icon: '/static/note.png', tag: 'é•¿æ–‡', name: 'è¯»åæ„Ÿ', desc: 'è¯»åæ„Ÿæ²¡çµæ„Ÿçš„åŒå­¦çœ‹è¿™é‡Œï¼' },
						{ icon: '/static/ppt.png', tag: 'é•¿æ–‡', name: 'PPT', desc: 'ä¸€é”®å¿«é€Ÿç”Ÿæˆï¼Œè½»æ¾æå®šPPT' },
						{ icon: '/static/word.png', tag: 'é•¿æ–‡', name: 'è®ºæ–‡åŠ©æ‰‹', desc: 'åŸºäºä¸“ä¸šçŸ¥è¯†åº“çš„AIè®ºæ–‡ä¸“å®¶' }
					]
				},
				'gov': {
					title: 'æœºå…³å•ä½',
					tools: [
						{ icon: '/static/book.png', tag: 'é•¿æ–‡', name: 'æ€æƒ³æ±‡æŠ¥', desc: 'å„ç±»æ€æƒ³æ±‡æŠ¥ï¼ŒåŠ©åŠ›ä½ çš„å·¥ä½œå­¦ä¹ ~' },
						{ icon: '/static/mic.png', tag: 'é•¿æ–‡', name: 'å‘è¨€ææ–™', desc: 'ä¸“ä¸šè¯¦å®çš„å‘è¨€ææ–™ï¼Œè®©ä½ çš„å‘è¨€æŒå£°ä¸åœ~' },
						{ icon: '/static/book.png', tag: 'é•¿æ–‡', name: 'å…¬æ–‡å†™ä½œ', desc: 'æ ¼å¼è§„èŒƒï¼Œé€»è¾‘ä¸¥è°¨ï¼Œæ‹Ÿä¸€ç¯‡å…¬æ–‡åªè¦å‡ åˆ†é’Ÿ' },
						{ icon: '/static/pen.png', tag: 'é•¿æ–‡', name: 'å¾æ–‡', desc: 'å„ç±»å¾æ–‡ï¼Œé«˜åˆ†ä½œå“ï¼Œé€»è¾‘ä¸¥è°¨' },
						{ icon: '/static/book.png', tag: 'é•¿æ–‡', name: 'ç”³è¯·ä¹¦', desc: 'æ’°å†™å„ç±»ç”³è¯·ä¹¦ï¼Œä¿¡æ‰‹æ‹ˆæ¥~' },
						{ icon: '/static/note.png', tag: 'é•¿æ–‡', name: 'è¯»åæ„Ÿ', desc: 'è¯»åæ„Ÿæ²¡çµæ„Ÿçš„åŒå­¦çœ‹è¿™é‡Œï¼' },
						{ icon: '/static/ppt.png', tag: 'é•¿æ–‡', name: 'PPT', desc: 'ä¸€é”®å¿«é€Ÿç”Ÿæˆï¼Œè½»æ¾æå®šPPT' },
						{ icon: '/static/report.png', tag: 'é•¿æ–‡', name: 'ä¸ªäººè‡ªæˆ‘å‰–æ', desc: 'å¯¹ç…§æ£€æŸ¥ï¼Œæ€æƒ³å‰–æ' }
					]
				},
				'media': {
					title: 'åª’ä½“æ–‡å­¦',
					tools: [
						{ icon: '/static/gzh.png', tag: 'é•¿æ–‡', name: 'å…¬ä¼—å·æ–‡ç« ', desc: 'å†™æœ‰æ–™æ–‡ç« ï¼Œæ‰¾ç²¾å‡†ç²‰ä¸ï¼Œè®©åˆ›ä½œä¸å†æ¯ç«­ï¼' },
						{ icon: '/static/note.png', tag: 'é•¿æ–‡', name: 'çŸ­ç¯‡å°è¯´', desc: 'çŸ­ç¯‡å°è¯´ï¼Œè®²è¿°æœ€å¥‡å¦™çš„æ•…äº‹' },
						{ icon: '/static/seo.png', tag: 'é•¿æ–‡', name: 'SEOæ–‡ç« ', desc: 'SEOç¥å™¨ï¼Œè®©ä½ çš„å†…å®¹è¥é”€å¤§æ”¾å¼‚å½©' },
						{ icon: '/static/mic.png', tag: 'é•¿æ–‡', name: 'å°å“å‰§æœ¬', desc: 'å°å“å‰§æœ¬çœ‹è¿‡æ¥ï¼Œå†ä¹Ÿä¸æ‹…å¿ƒæ™šä¼šæ¼”ä»€ä¹ˆäº†~' },
						{ icon: '/static/gzh.png', tag: 'é•¿æ–‡', name: 'æœ‹å‹åœˆæ–‡æ¡ˆ', desc: 'æƒ³å‘æœ‹å‹åœˆï¼Œä¸çŸ¥è¯´ç‚¹å•¥ï¼Ÿæˆ‘æ¥æå®šï¼' },
						{ icon: '/static/pen.png', tag: 'é•¿æ–‡', name: 'ç§‘æ™®æ–‡ç« ', desc: 'ç§‘æ™®å†…å®¹ï¼Œé€šä¿—æ˜“æ‡‚' }
					]
				},
				'business': {
					title: 'å•†ä¸šåˆ†æ',
					tools: [
						{ icon: '/static/analysis.png', tag: 'é•¿æ–‡', name: 'å¸‚åœºåˆ†æ', desc: 'æ·±åº¦å¸‚åœºåˆ†æï¼ŒåŠ©åŠ›å†³ç­–' },
						{ icon: '/static/plan.png', tag: 'é•¿æ–‡', name: 'å•†ä¸šè®¡åˆ’ä¹¦', desc: 'ä¸“ä¸šå•†ä¸šè®¡åˆ’ä¹¦ï¼Œèèµ„è·¯æ¼”å¿…å¤‡' },
						{ icon: '/static/report.png', tag: 'é•¿æ–‡', name: 'è¡Œä¸šæŠ¥å‘Š', desc: 'æƒå¨è¡Œä¸šæŠ¥å‘Šï¼Œæ•°æ®è¯¦å®' },
						{ icon: '/static/summary.png', tag: 'é•¿æ–‡', name: 'æ•°æ®æ€»ç»“', desc: 'æ•°æ®æ€»ç»“ï¼Œæ´å¯Ÿè¶‹åŠ¿' }
					]
				}
			}

			const group = groupData[this.groupKey]
			if (group) {
				this.groupTitle = group.title
				this.toolsList = group.tools
			}
		},

		selectTool(tool) {
			uni.showToast({
				title: `é€‰æ‹©äº†${tool.name}`,
				icon: 'success'
			})
		},

		chooseFile() {
			uni.chooseFile({
				count: 1,
				type: 'file',
				extension: ['.doc', '.docx', '.pdf', '.txt'],
				success: (res) => {
					const file = res.tempFiles[0]
					this.uploadedFiles.push({
						name: file.name,
						size: this.formatFileSize(file.size),
						path: file.path
					})
					uni.showToast({
						title: 'æ–‡ä»¶ä¸Šä¼ æˆåŠŸ',
						icon: 'success'
					})
				},
				fail: (err) => {
					uni.showToast({
						title: 'æ–‡ä»¶é€‰æ‹©å¤±è´¥',
						icon: 'none'
					})
				}
			})
		},

		formatFileSize(size) {
			if (size < 1024) {
				return size + 'B'
			} else if (size < 1024 * 1024) {
				return (size / 1024).toFixed(1) + 'KB'
			} else {
				return (size / (1024 * 1024)).toFixed(1) + 'MB'
			}
		},

		previewFile(file) {
			uni.showToast({
				title: 'æ–‡ä»¶é¢„è§ˆåŠŸèƒ½å¼€å‘ä¸­',
				icon: 'none'
			})
		},

		deleteFile(index) {
			uni.showModal({
				title: 'ç¡®è®¤åˆ é™¤',
				content: 'ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ–‡ä»¶å—ï¼Ÿ',
				success: (res) => {
					if (res.confirm) {
						this.uploadedFiles.splice(index, 1)
						uni.showToast({
							title: 'æ–‡ä»¶å·²åˆ é™¤',
							icon: 'success'
						})
					}
				}
			})
		},

		startCreation() {
			uni.showToast({
				title: 'å¼€å§‹åˆ›ä½œåŠŸèƒ½å¼€å‘ä¸­',
				icon: 'none'
			})
		},

		saveTemplate() {
			uni.showToast({
				title: 'ä¿å­˜æ¨¡æ¿åŠŸèƒ½å¼€å‘ä¸­',
				icon: 'none'
			})
		},

		shareTools() {
			uni.showToast({
				title: 'åˆ†äº«å·¥å…·åŠŸèƒ½å¼€å‘ä¸­',
				icon: 'none'
			})
		}
	}
}
</script>

<style>
.more-container {
	flex: 1;
	background-color: #f8f8f8;
}

/* é¡¶éƒ¨æ ‡é¢˜ */
.header {
	display: flex;
	justify-content: center;
	align-items: center;
	padding: 30rpx;
	border-bottom: 1rpx solid #e0e0e0;
	background-color: #ffffff;
}

.page-title {
	font-size: 36rpx;
	font-weight: 600;
	color: #000000;
}

/* ä¸»è¦å†…å®¹ */
.main-content {
	flex: 1;
	padding: 30rpx;
}

/* å·¥å…·åˆ—è¡¨ */
.tools-section {
	margin-bottom: 40rpx;
}

.tools-grid {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 20rpx;
}

.tool-item {
	background-color: #ffffff;
	border-radius: 16rpx;
	padding: 30rpx;
	text-align: center;
	position: relative;
	box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);
}

.tool-icon {
	width: 80rpx;
	height: 80rpx;
	background-color: #007aff;
	border-radius: 12rpx;
	display: flex;
	align-items: center;
	justify-content: center;
	margin: 0 auto 20rpx;
}

.icon-img {
	width: 50rpx;
	height: 50rpx;
}

.icon-text {
	font-size: 36rpx;
	font-weight: 600;
	color: #ffffff;
}

.tool-name {
	font-size: 28rpx;
	font-weight: 600;
	color: #000000;
	display: block;
	margin-bottom: 10rpx;
}

.tool-desc {
	font-size: 24rpx;
	color: #666666;
	line-height: 1.4;
	margin-bottom: 15rpx;
}

.tool-tag {
	position: absolute;
	top: 15rpx;
	right: 15rpx;
	background-color: #e3f2fd;
	color: #007aff;
	font-size: 20rpx;
	padding: 4rpx 8rpx;
	border-radius: 4rpx;
}

/* ä¸Šä¼ åŒºåŸŸ */
.upload-section {
	background-color: #ffffff;
	border-radius: 16rpx;
	padding: 40rpx;
	margin-bottom: 40rpx;
}

.section-title {
	font-size: 32rpx;
	font-weight: 600;
	color: #000000;
	margin-bottom: 15rpx;
	display: block;
}

.section-desc {
	font-size: 26rpx;
	color: #666666;
	margin-bottom: 30rpx;
	display: block;
}

.upload-area {
	border: 2rpx dashed #e0e0e0;
	border-radius: 12rpx;
	padding: 60rpx 30rpx;
	text-align: center;
	margin-bottom: 30rpx;
	transition: all 0.3s;
}

.upload-area:active {
	border-color: #007aff;
	background-color: #f0f8ff;
}

.upload-icon {
	font-size: 80rpx;
	margin-bottom: 20rpx;
}

.upload-text {
	font-size: 28rpx;
	color: #000000;
	display: block;
	margin-bottom: 10rpx;
}

.upload-tip {
	font-size: 24rpx;
	color: #999999;
}

/* æ–‡ä»¶åˆ—è¡¨ */
.file-list {
	display: flex;
	flex-direction: column;
	gap: 15rpx;
}

.file-item {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 20rpx;
	border: 1rpx solid #f0f0f0;
	border-radius: 8rpx;
	background-color: #f8f8f8;
}

.file-info {
	display: flex;
	flex-direction: column;
	gap: 5rpx;
}

.file-name {
	font-size: 26rpx;
	color: #000000;
}

.file-size {
	font-size: 22rpx;
	color: #666666;
}

.file-actions {
	display: flex;
	gap: 15rpx;
}

.action-btn {
	font-size: 24rpx;
	color: #007aff;
	padding: 8rpx 16rpx;
	border-radius: 6rpx;
	background-color: #f0f8ff;
}

.action-btn.delete {
	color: #ff3b30;
	background-color: #fff0f0;
}

/* å¿«é€Ÿæ“ä½œ */
.quick-actions {
	background-color: #ffffff;
	border-radius: 16rpx;
	padding: 40rpx;
}

.action-buttons {
	display: flex;
	gap: 20rpx;
}

.action-btn {
	flex: 1;
	height: 80rpx;
	background: linear-gradient(90deg, #007aff 0%, #00c851 100%);
	color: #ffffff;
	border: none;
	border-radius: 12rpx;
	font-size: 28rpx;
	font-weight: 500;
	display: flex;
	align-items: center;
	justify-content: center;
}

.action-btn.secondary {
	background: #ffffff;
	color: #007aff;
	border: 2rpx solid #007aff;
}
</style> 