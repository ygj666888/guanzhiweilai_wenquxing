{"version":3,"file":"bind-phone.js","sources":["pages/profile/bind-phone/bind-phone.uvue","pages/profile/bind-phone/bind-phone.uvue?type=page"],"sourcesContent":["<template>\n\t<view class=\"bind-phone-container\">\n\t\t<!-- 手机号输入 -->\n\t\t<view class=\"input-section\">\n\t\t\t<view class=\"input-item\">\n\t\t\t\t<text class=\"input-label\">手机号</text>\n\t\t\t\t<input \n\t\t\t\t\tclass=\"phone-input\" \n\t\t\t\t\tv-model=\"phoneNumber\" \n\t\t\t\t\ttype=\"number\" \n\t\t\t\t\tmaxlength=\"11\"\n\t\t\t\t\tplaceholder=\"请输入手机号\"\n\t\t\t\t/>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 验证码输入 -->\n\t\t<view class=\"input-section\">\n\t\t\t<view class=\"input-item\">\n\t\t\t\t<text class=\"input-label\">验证码</text>\n\t\t\t\t<view class=\"code-section\">\n\t\t\t\t\t<input \n\t\t\t\t\t\tclass=\"code-input\" \n\t\t\t\t\t\tv-model=\"verificationCode\" \n\t\t\t\t\t\ttype=\"number\" \n\t\t\t\t\t\tmaxlength=\"6\"\n\t\t\t\t\t\tplaceholder=\"请输入验证码\"\n\t\t\t\t\t/>\n\t\t\t\t\t<button \n\t\t\t\t\t\tclass=\"send-code-btn\" \n\t\t\t\t\t\t:disabled=\"!canSendCode || countdown > 0\"\n\t\t\t\t\t\t@click=\"sendCode\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{countdown > 0 ? `${countdown}s` : '发送验证码'}}\n\t\t\t\t\t</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 绑定按钮 -->\n\t\t<view class=\"button-section\">\n\t\t\t<button class=\"bind-btn\" @click=\"bindPhone\" :disabled=\"!canBind\">\n\t\t\t\t绑定\n\t\t\t</button>\n\t\t</view>\n\t\t\n\t\t<!-- 绑定成功弹窗 -->\n\t\t<view class=\"success-overlay\" v-if=\"showSuccess\">\n\t\t\t<view class=\"success-modal\">\n\t\t\t\t<view class=\"success-icon\">✓</view>\n\t\t\t\t<text class=\"success-text\">绑定成功</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script lang=\"uts\">\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tphoneNumber: '',\n\t\t\tverificationCode: '',\n\t\t\tcountdown: 0,\n\t\t\tshowSuccess: false\n\t\t}\n\t},\n\tcomputed: {\n\t\tcanSendCode() {\n\t\t\treturn this.phoneNumber.length === 11\n\t\t},\n\t\tcanBind() {\n\t\t\treturn this.phoneNumber.length === 11 && this.verificationCode.length === 6\n\t\t}\n\t},\n\tmethods: {\n\t\tsendCode() {\n\t\t\tif (!this.canSendCode) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请输入正确的手机号',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\t// 模拟发送验证码\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '发送中...'\n\t\t\t})\n\t\t\t\n\t\t\tsetTimeout(() => {\n\t\t\t\tuni.hideLoading()\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '验证码已发送',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t// 开始倒计时\n\t\t\t\tthis.countdown = 60\n\t\t\t\tthis.startCountdown()\n\t\t\t}, 1000)\n\t\t},\n\t\t\n\t\tstartCountdown() {\n\t\t\tif (this.countdown > 0) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.countdown--\n\t\t\t\t\tthis.startCountdown()\n\t\t\t\t}, 1000)\n\t\t\t}\n\t\t},\n\t\t\n\t\tbindPhone() {\n\t\t\tif (!this.canBind) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '请填写完整信息',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t\t\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '绑定中...'\n\t\t\t})\n\t\t\t\n\t\t\tsetTimeout(() => {\n\t\t\t\tuni.hideLoading()\n\t\t\t\t\n\t\t\t\t// 显示成功弹窗\n\t\t\t\tthis.showSuccess = true\n\t\t\t\t\n\t\t\t\t// 保存绑定状态到本地存储\n\t\t\t\tuni.setStorageSync('phoneBound', true)\n\t\t\t\tuni.setStorageSync('phoneNumber', this.phoneNumber)\n\t\t\t\t\n\t\t\t\t// 更新用户信息\n\t\t\t\tconst userInfo = uni.getStorageSync('userInfo') || {\n\t\t\t\t\tnickname: 'inner2466',\n\t\t\t\t\tuserId: '1933438229252542466',\n\t\t\t\t\tisVip: false,\n\t\t\t\t\tcoins: 5000,\n\t\t\t\t\trechargeOrders: 0,\n\t\t\t\t\tquestionRecords: 0,\n\t\t\t\t\tcreationRecords: 0\n\t\t\t\t}\n\t\t\t\tuserInfo.phoneBound = true\n\t\t\t\tuserInfo.phoneNumber = this.phoneNumber\n\t\t\t\tuni.setStorageSync('userInfo', userInfo)\n\t\t\t\t\n\t\t\t\t// 3秒后返回上一页\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.showSuccess = false\n\t\t\t\t\tuni.navigateBack()\n\t\t\t\t}, 3000)\n\t\t\t}, 2000)\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.bind-phone-container {\n\tflex: 1;\n\tbackground-color: #f8f8f8;\n\tpadding: 30rpx;\n}\n\n.input-section {\n\tbackground-color: #ffffff;\n\tborder-radius: 16rpx;\n\tpadding: 40rpx;\n\tmargin-bottom: 30rpx;\n}\n\n.input-item {\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: 20rpx;\n}\n\n.input-label {\n\tfont-size: 28rpx;\n\tcolor: #000000;\n}\n\n.phone-input {\n\twidth: 100%;\n\theight: 80rpx;\n\tborder: 1rpx solid #e0e0e0;\n\tborder-radius: 8rpx;\n\tpadding: 0 20rpx;\n\tfont-size: 28rpx;\n\tbackground-color: #ffffff;\n}\n\n.code-section {\n\tdisplay: flex;\n\tgap: 20rpx;\n}\n\n.code-input {\n\tflex: 1;\n\theight: 80rpx;\n\tborder: 1rpx solid #e0e0e0;\n\tborder-radius: 8rpx;\n\tpadding: 0 20rpx;\n\tfont-size: 28rpx;\n\tbackground-color: #ffffff;\n}\n\n.send-code-btn {\n\twidth: 200rpx;\n\theight: 80rpx;\n\tbackground-color: #007aff;\n\tcolor: #ffffff;\n\tborder: none;\n\tborder-radius: 8rpx;\n\tfont-size: 26rpx;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.send-code-btn:disabled {\n\tbackground-color: #cccccc;\n\tcolor: #999999;\n}\n\n.button-section {\n\tpadding: 30rpx 0;\n}\n\n.bind-btn {\n\twidth: 100%;\n\theight: 100rpx;\n\tbackground: linear-gradient(90deg, #007aff 0%, #00c851 100%);\n\tcolor: #ffffff;\n\tborder: none;\n\tborder-radius: 16rpx;\n\tfont-size: 32rpx;\n\tfont-weight: 500;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.bind-btn:disabled {\n\tbackground: #cccccc;\n\tcolor: #999999;\n}\n\n.success-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 999;\n}\n\n.success-modal {\n\tbackground-color: #333333;\n\tborder-radius: 16rpx;\n\tpadding: 60rpx 80rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tgap: 30rpx;\n}\n\n.success-icon {\n\twidth: 80rpx;\n\theight: 80rpx;\n\tbackground-color: #00c851;\n\tcolor: #ffffff;\n\tborder-radius: 50%;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 48rpx;\n\tfont-weight: 600;\n}\n\n.success-text {\n\tfont-size: 32rpx;\n\tcolor: #ffffff;\n\tfont-weight: 500;\n}\n</style> ","import MiniProgramPage from '/Users/cc/Desktop/冠层企业/AI程序开发/HBuilderX/冠智未来文曲星小程序/pages/profile/bind-phone/bind-phone.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni"],"mappings":";;AAyDA,MAAA,YAAeA,8BAAA;AAAA,EACd,OAAI;AACH,WAAO;AAAA,MACN,aAAa;AAAA,MACb,kBAAkB;AAAA,MAClB,WAAW;AAAA,MACX,aAAa;AAAA;EAEd;AAAA,EACD,UAAU;AAAA,IACT,cAAW;AACV,aAAO,KAAK,YAAY,WAAW;AAAA,IACnC;AAAA,IACD,UAAO;AACN,aAAO,KAAK,YAAY,WAAW,MAAM,KAAK,iBAAiB,WAAW;AAAA,IAC3E;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,WAAQ;AACP,UAAI,CAAC,KAAK,aAAa;AACtBC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACN,CAAA;AACD,eAAK;AAAA,MACN;AAGAA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,MACP,CAAA;AAED,iBAAW,MAAA;AACVA,sBAAG,MAAC,YAAW;AACfA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACN,CAAA;AAGD,aAAK,YAAY;AACjB,aAAK,eAAc;AAAA,MACnB,GAAE,GAAI;AAAA,IACP;AAAA,IAED,iBAAc;AACb,UAAI,KAAK,YAAY,GAAG;AACvB,mBAAW,MAAA;AACV,eAAK;AACL,eAAK,eAAc;AAAA,QACnB,GAAE,GAAI;AAAA,MACR;AAAA,IACA;AAAA,IAED,YAAS;AACR,UAAI,CAAC,KAAK,SAAS;AAClBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QACN,CAAA;AACD,eAAK;AAAA,MACN;AAEAA,oBAAAA,MAAI,YAAY;AAAA,QACf,OAAO;AAAA,MACP,CAAA;AAED,iBAAW,MAAA;AACVA,sBAAG,MAAC,YAAW;AAGf,aAAK,cAAc;AAGnBA,sBAAAA,MAAI,eAAe,cAAc,IAAI;AACrCA,sBAAAA,MAAI,eAAe,eAAe,KAAK,WAAW;AAGlD,cAAM,WAAWA,cAAAA,MAAI,eAAe,UAAU,KAAK,IAAA,cAAA;AAAA,UAClD,UAAU;AAAA,UACV,QAAQ;AAAA,UACR,OAAO;AAAA,UACP,OAAO;AAAA,UACP,gBAAgB;AAAA,UAChB,iBAAiB;AAAA,UACjB,iBAAiB;AAAA,QAClB,CAAA;AACA,iBAAS,aAAa;AACtB,iBAAS,cAAc,KAAK;AAC5BA,sBAAAA,MAAI,eAAe,YAAY,QAAQ;AAGvC,mBAAW,MAAA;AACV,eAAK,cAAc;AACnBA,wBAAG,MAAC,aAAY;AAAA,QAChB,GAAE,GAAI;AAAA,MACP,GAAE,GAAI;AAAA,IACR;AAAA,EACD;CACD;;;;;;;;;;;;;;;;;;AC3JA,GAAG,WAAW,eAAe;"}