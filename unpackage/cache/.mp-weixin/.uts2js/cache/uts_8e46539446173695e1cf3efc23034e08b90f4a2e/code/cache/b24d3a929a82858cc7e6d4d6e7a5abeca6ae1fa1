{"code":"import { defineComponent } from \"vue\";\nimport auth from '@/utils/auth.js';\nexport default defineComponent({\n    data() {\n        return {\n            isLoggedIn: false,\n            userInfo: new UTSJSONObject({\n                nickname: 'inner2466',\n                userId: '1933438229252542466',\n                isVip: false,\n                coins: 5000,\n                rechargeOrders: 0,\n                questionRecords: 0,\n                creationRecords: 0\n            })\n        };\n    },\n    onLoad() {\n        this.loadUserData();\n    },\n    onShow() {\n        // 每次显示页面时重新加载数据，确保显示最新信息\n        uni.__f__('log', 'at pages/profile/profile.uvue:146', 'Profile页面 - onShow 触发');\n        this.loadUserData();\n        // 检查是否有登录状态更新\n        if (auth.checkAndClearLoginStatusUpdated()) {\n            uni.__f__('log', 'at pages/profile/profile.uvue:151', 'Profile页面 - 检测到登录状态更新，重新检查');\n            this.loadUserData();\n        }\n    },\n    methods: {\n        // 加载用户数据\n        loadUserData() {\n            // 使用全局登录状态管理工具\n            const result = auth.checkLoginStatus();\n            if (result.isLoggedIn) {\n                this.isLoggedIn = true;\n                this.userInfo = Object.assign(Object.assign({}, this.userInfo), result.userInfo);\n                uni.__f__('log', 'at pages/profile/profile.uvue:165', 'Profile页面 - 登录成功，用户信息:', this.userInfo);\n                // 从本地存储加载头像\n                const savedAvatar = uni.getStorageSync('userAvatar');\n                if (savedAvatar) {\n                    this.userInfo.avatar = savedAvatar;\n                }\n                // 检查手机绑定状态\n                const phoneBound = uni.getStorageSync('phoneBound');\n                if (phoneBound) {\n                    this.userInfo.phoneBound = true;\n                    // 确保用户信息中也包含手机绑定状态\n                    if (!this.userInfo.phoneBound) {\n                        this.userInfo.phoneBound = true;\n                        uni.setStorageSync('userInfo', this.userInfo);\n                    }\n                }\n            }\n            else {\n                this.isLoggedIn = false;\n                this.userInfo = {\n                    nickname: '',\n                    userId: '',\n                    isVip: false,\n                    coins: 0,\n                    rechargeOrders: 0,\n                    questionRecords: 0,\n                    creationRecords: 0\n                };\n                uni.__f__('log', 'at pages/profile/profile.uvue:194', 'Profile页面 - 未登录状态');\n            }\n        },\n        // 清除登录数据\n        clearLoginData() {\n            // 使用全局登录状态管理工具清除数据\n            auth.clearLoginData();\n            this.isLoggedIn = false;\n            this.userInfo = {\n                nickname: '',\n                userId: '',\n                isVip: false,\n                coins: 0,\n                rechargeOrders: 0,\n                questionRecords: 0,\n                creationRecords: 0\n            };\n        },\n        // 跳转到登录页面\n        goToLogin() {\n            uni.navigateTo({\n                url: '/pages/login/login'\n            });\n        },\n        // 退出登录\n        logout() {\n            uni.showModal(new UTSJSONObject({\n                title: '确认退出',\n                content: '确定要退出登录吗？',\n                success: (res) => {\n                    if (res.confirm) {\n                        // 使用全局登录状态管理工具清除数据\n                        auth.clearLoginData();\n                        this.isLoggedIn = false;\n                        this.userInfo = {\n                            nickname: '',\n                            userId: '',\n                            isVip: false,\n                            coins: 0,\n                            rechargeOrders: 0,\n                            questionRecords: 0,\n                            creationRecords: 0\n                        };\n                        uni.showToast({\n                            title: '已退出登录',\n                            icon: 'success'\n                        });\n                    }\n                }\n            }));\n        },\n        // 页面跳转方法\n        goToEditProfile() {\n            uni.navigateTo({\n                url: '/pages/profile/edit-profile/edit-profile'\n            });\n        },\n        goToUpgradeMember() {\n            uni.navigateTo({\n                url: '/pages/profile/upgrade-member/upgrade-member'\n            });\n        },\n        goToRecharge() {\n            uni.navigateTo({\n                url: '/pages/profile/recharge/recharge'\n            });\n        },\n        inviteFriends() {\n            uni.showActionSheet({\n                itemList: ['分享给微信好友', '复制邀请链接'],\n                success: (res) => {\n                    if (res.tapIndex === 0) {\n                        // 分享给微信好友\n                        uni.share(new UTSJSONObject({\n                            provider: 'weixin',\n                            scene: 'WXSceneSession',\n                            type: 0,\n                            href: 'https://www.wsxai.com/invite?code=inner2466',\n                            title: '冠智未来文曲星小程序',\n                            summary: '邀请您使用冠智未来文曲星小程序，成功注册可获得1万硬币奖励！',\n                            imageUrl: '/static/logo.png',\n                            success: () => {\n                                uni.showToast({\n                                    title: '分享成功',\n                                    icon: 'success'\n                                });\n                            },\n                            fail: () => {\n                                uni.showToast({\n                                    title: '分享失败',\n                                    icon: 'none'\n                                });\n                            }\n                        }));\n                    }\n                    else if (res.tapIndex === 1) {\n                        // 复制邀请链接\n                        const inviteLink = 'https://www.wsxai.com/invite?code=inner2466';\n                        uni.setClipboardData({\n                            data: inviteLink,\n                            success: () => {\n                                uni.showToast({\n                                    title: '邀请链接已复制',\n                                    icon: 'success'\n                                });\n                            }\n                        });\n                    }\n                }\n            });\n        },\n        goToShareEarn() {\n            uni.navigateTo({\n                url: '/pages/profile/share-earn/share-earn'\n            });\n        },\n        goToDesktop() {\n            uni.navigateTo({\n                url: '/pages/webview/webview?url=' + encodeURIComponent('https://www.wsxai.com/')\n            });\n        },\n        goToUsageGuide() {\n            uni.navigateTo({\n                url: '/pages/profile/usage-guide/usage-guide'\n            });\n        },\n        contactService() {\n            uni.showActionSheet({\n                itemList: ['在线客服', '拨打客服电话'],\n                success: (res) => {\n                    if (res.tapIndex === 0) {\n                        // 在线客服\n                        uni.navigateTo({\n                            url: '/pages/profile/customer-service/customer-service'\n                        });\n                    }\n                    else if (res.tapIndex === 1) {\n                        // 拨打客服电话\n                        uni.makePhoneCall({\n                            phoneNumber: '400-123-4567',\n                            success: () => {\n                                uni.showToast({\n                                    title: '正在拨打客服电话',\n                                    icon: 'none'\n                                });\n                            }\n                        });\n                    }\n                }\n            });\n        },\n        goToAccountSecurity() {\n            uni.navigateTo({\n                url: '/pages/profile/account-security/account-security'\n            });\n        },\n        goToAboutUs() {\n            uni.navigateTo({\n                url: '/pages/profile/about-us/about-us'\n            });\n        },\n        goToFeedback() {\n            uni.navigateTo({\n                url: '/pages/profile/feedback/feedback'\n            });\n        }\n    }\n});\n//# sourceMappingURL=/Users/cc/Desktop/%E5%86%A0%E5%B1%82%E4%BC%81%E4%B8%9A/AI%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/HBuilderX/%E5%86%A0%E6%99%BA%E6%9C%AA%E6%9D%A5%E6%96%87%E6%9B%B2%E6%98%9F%E5%B0%8F%E7%A8%8B%E5%BA%8F/pages/profile/profile.uvue?vue&type=script&lang.uts.js.map","references":["/Users/cc/Desktop/冠层企业/AI程序开发/HBuilderX/冠智未来文曲星小程序/utils/auth.js"],"uniExtApis":["uni.__f__","uni.getStorageSync","uni.setStorageSync","uni.navigateTo","uni.showModal","uni.showToast","uni.showActionSheet","uni.share","uni.setClipboardData","uni.makePhoneCall"],"map":"{\"version\":3,\"file\":\"profile.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"profile.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
