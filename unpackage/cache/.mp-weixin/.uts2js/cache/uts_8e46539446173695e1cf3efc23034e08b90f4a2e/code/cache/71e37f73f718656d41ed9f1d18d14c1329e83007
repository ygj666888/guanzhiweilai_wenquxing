{"code":"import { defineComponent } from \"vue\";\nimport auth from '@/utils/auth.js';\nexport default defineComponent({\n    data() {\n        return {\n            isLoggedIn: false,\n            userInfo: new UTSJSONObject({\n                isVip: false,\n                nickname: '',\n                coins: 0\n            }),\n            options: new UTSJSONObject({\n                deepThinking: true,\n                networkQuery: true,\n                knowledgeQuery: true\n            }),\n            questionText: ''\n        };\n    },\n    onLoad() {\n        this.checkLoginStatus();\n    },\n    onShow() {\n        this.checkLoginStatus();\n        // 检查是否有登录状态更新\n        if (auth.checkAndClearLoginStatusUpdated()) {\n            this.checkLoginStatus();\n        }\n    },\n    methods: {\n        checkLoginStatus() {\n            // 使用全局登录状态管理工具\n            const result = auth.checkLoginStatus();\n            if (result.isLoggedIn) {\n                this.isLoggedIn = true;\n                this.userInfo = Object.assign(Object.assign({}, this.userInfo), result.userInfo);\n            }\n            else {\n                this.isLoggedIn = false;\n                this.userInfo = {\n                    isVip: false,\n                    nickname: '',\n                    coins: 0\n                };\n            }\n        },\n        clearLoginData() {\n            // 使用全局登录状态管理工具清除数据\n            auth.clearLoginData();\n            this.isLoggedIn = false;\n            this.userInfo = {\n                isVip: false,\n                nickname: '',\n                coins: 0\n            };\n        },\n        loadUserData() {\n            // 从本地存储加载用户信息（仅在需要时调用）\n            const savedUserInfo = uni.getStorageSync('userInfo');\n            if (savedUserInfo) {\n                this.userInfo = Object.assign(Object.assign({}, this.userInfo), savedUserInfo);\n            }\n        },\n        goToLogin() {\n            uni.navigateTo({\n                url: '/pages/login/login'\n            });\n        },\n        goToUpgrade() {\n            uni.navigateTo({\n                url: '/pages/profile/upgrade-member/upgrade-member'\n            });\n        },\n        goToDesktop() {\n            uni.navigateTo({\n                url: '/pages/webview/webview?url=' + encodeURIComponent('https://www.wsxai.com/')\n            });\n        },\n        goToMore() {\n            uni.navigateTo({\n                url: '/pages/creation/creation'\n            });\n        },\n        goToPaperAssistant() {\n            // 根据PRD，论文助手可以直接从首页进入\n            uni.navigateTo({\n                url: '/pages/creation/paper-assistant/paper-assistant'\n            });\n        },\n        goToPPT() {\n            uni.navigateTo({\n                url: '/pages/creation/ppt/ppt'\n            });\n        },\n        goToExperience() {\n            uni.navigateTo({\n                url: '/pages/creation/experience/experience'\n            });\n        },\n        goToSpeech() {\n            uni.navigateTo({\n                url: '/pages/creation/speech/speech'\n            });\n        },\n        toggleOption(option = null) {\n            this.options[option] = !this.options[option];\n        },\n        goToHistory() {\n            uni.navigateTo({\n                url: '/pages/qa/history/history'\n            });\n        },\n        startVoiceInput() {\n            uni.showToast({\n                title: '语音输入功能开发中',\n                icon: 'none'\n            });\n        },\n        uploadImage() {\n            // 显示选择来源的操作菜单\n            uni.showActionSheet({\n                itemList: ['从相册选择', '拍照'],\n                success: (res) => {\n                    let sourceType = [];\n                    if (res.tapIndex === 0) {\n                        // 从相册选择\n                        sourceType = ['album'];\n                    }\n                    else if (res.tapIndex === 1) {\n                        // 拍照\n                        sourceType = ['camera'];\n                    }\n                    // 打开图片选择器\n                    uni.chooseImage(new UTSJSONObject({\n                        count: 1,\n                        sizeType: ['compressed'],\n                        sourceType: sourceType,\n                        success: (res) => {\n                            uni.showToast({\n                                title: '图片已选择',\n                                icon: 'success'\n                            });\n                            // 这里可以添加图片处理逻辑\n                            // 比如上传到服务器或进行AI识别\n                        },\n                        fail: (err) => {\n                            uni.showToast({\n                                title: '选择图片失败',\n                                icon: 'none'\n                            });\n                        }\n                    }));\n                }\n            });\n        },\n        sendQuestion() {\n            if (!this.questionText.trim()) {\n                uni.showToast({\n                    title: '请输入问题',\n                    icon: 'none'\n                });\n                return null;\n            }\n            uni.showLoading({\n                title: '思考中...'\n            });\n            // 模拟AI回答\n            setTimeout(() => {\n                uni.hideLoading();\n                uni.showToast({\n                    title: 'AI回答功能开发中',\n                    icon: 'none'\n                });\n                this.questionText = '';\n            }, 2000);\n        }\n    }\n});\n//# sourceMappingURL=/Users/cc/Desktop/%E5%86%A0%E5%B1%82%E4%BC%81%E4%B8%9A/AI%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/HBuilderX/%E5%86%A0%E6%99%BA%E6%9C%AA%E6%9D%A5%E6%96%87%E6%9B%B2%E6%98%9F%E5%B0%8F%E7%A8%8B%E5%BA%8F/pages/index/index.uvue?vue&type=script&lang.uts.js.map","references":["/Users/cc/Desktop/冠层企业/AI程序开发/HBuilderX/冠智未来文曲星小程序/utils/auth.js"],"uniExtApis":["uni.getStorageSync","uni.navigateTo","uni.showToast","uni.showActionSheet","uni.chooseImage","uni.showLoading","uni.hideLoading"],"map":"{\"version\":3,\"file\":\"index.uvue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"index.uvue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\"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\"}"}
